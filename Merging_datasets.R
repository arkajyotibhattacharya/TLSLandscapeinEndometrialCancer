install.packages('Seurat', dependencies = TRUE)

library(Seurat)
setwd("/data/bioinfo-fehrmann/Spatial transcriptomics/Data/visium_rds_files/")
EC1 <- readRDS("EC1.rds")
EC2 <- readRDS("EC2.rds")
EC3 <- readRDS("EC3.rds")
GB1 <- readRDS("GB1.rds")
GB2 <- readRDS("GB2.rds")
CRC1 <- readRDS("CRC1.rds")
CRC2 <- readRDS("CRC2.rds")
CRC3 <- readRDS("CRC3.rds")
LC1 <- readRDS("LC1.rds")
LC2 <- readRDS("LC2.rds")
M1 <- readRDS("M1.rds")
OC1 <- readRDS("OC1.rds")
OC2 <- readRDS("OC2.rds")
OC3 <- readRDS("OC3.rds")
PC1 <- readRDS("PC1.rds")
PC2 <- readRDS("PC2.rds")
PC3 <- readRDS("PC3.rds")
BC1 <- readRDS("BC1.rds")
BC2 <- readRDS("BC2.rds")
BC3 <- readRDS("BC3.rds")
BC4 <- readRDS("BC4.rds")
BC5 <- readRDS("BC5.rds")
CC1 <- readRDS("CC1.rds")
IDC1 <- readRDS("IDC1.rds")

##this is dumb, but seurat doesn’t merge more than 2 spatial sets at once…
tumor.merge <- merge(EC1, EC2)
tumor.merge <- merge(tumor.merge, EC3)
tumor.merge <- merge(tumor.merge, GB1)
tumor.merge <- merge(tumor.merge, GB2)
tumor.merge <- merge(tumor.merge, CRC1)
tumor.merge <- merge(tumor.merge, CRC2)
tumor.merge <- merge(tumor.merge, CRC3)
tumor.merge <- merge(tumor.merge, LC1)
tumor.merge <- merge(tumor.merge, LC2)
tumor.merge <- merge(tumor.merge, M1)
tumor.merge <- merge(tumor.merge, OC1)
tumor.merge <- merge(tumor.merge, OC2)
tumor.merge <- merge(tumor.merge, OC3)
tumor.merge <- merge(tumor.merge, PC1)
tumor.merge <- merge(tumor.merge, PC2)
tumor.merge <- merge(tumor.merge, PC3)
tumor.merge <- merge(tumor.merge, BC1)
tumor.merge <- merge(tumor.merge, BC2)
tumor.merge <- merge(tumor.merge, BC3)
tumor.merge <- merge(tumor.merge, BC4)
tumor.merge <- merge(tumor.merge, BC5)
tumor.merge <- merge(tumor.merge, CC1)
tumor.merge <- merge(tumor.merge, IDC1)

saveRDS(tumor.merge, file = "ALL_VISIUM_FILES_MERGED.rds")
